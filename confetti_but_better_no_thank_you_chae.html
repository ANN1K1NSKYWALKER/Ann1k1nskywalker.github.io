<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Document</title>
	<style>
		.confetti {
			width: 10px;
			height: 50px;
			border: 1px solid black;
			display: inline-block;
			position: absolute;
			animation-name: swing3d;
			animation-duration: 1.2s;
			animation-iteration-count: infinite;
			animation-direction: alternate;
			animation-timing-function: ease-in-out;
		}
		@keyframes swing {
			from {
				transform: rotate(var(--startRot));
			}
			to {
				transform: rotate(var(--endRot));
			}
		}
		@keyframes swing3d {
			from {
				transform: rotateZ(-25deg) rotateY(-180deg);
			}
			to {
				transform: rotateZ(25deg) rotateY(180deg);
			}
		}
			
	</style>
</head>
<body>

	<button id="btn">Drop Confetti</button>
	<input type="color" name="" value="#00635D" id="colorPicker">
	<input type="range" name="" min="1" max="10" step="1" id="slider">
	<script>
		let ted = ["#DCF763", "#435058", "#BFB7B6"]
		let dropConfettiBtn = document.getElementById("btn")
		let colorPicker = document.getElementById("colorPicker")
		let slider = document.getElementById("slider")
		
		function makeConfetti() {
			
			let square = document.createElement("div")
			square.classList.add("confetti")
			document.body.appendChild(square)

			let r = Math.random() * 255
			let g = Math.random() * 255
			let b = Math.random() * 255
			let rotation = Math.random() * 360

			let startRot = Math.random() * -60 + "deg"
			let endRot = Math.random() * 60 + "deg"

			let randomColorIndex = Math.floor(Math.random()*
			ted.length)
			console.log(randomColorIndex)
			// square.style.backgroundColor = ted[randomColorIndex]
			square.style.backgroundColor = colorPicker.value

			// square.style.backgroundColor = "rgb("+ r + "," + g + "," + b + ")"
			square.style.top = Math.random() * 1000 + "px"
			square.style.left = Math.random() * 1500 + "px"
			square.style.transform = "rotate("+rotation+"deg)"

			square.style.setProperty("--startRot", startRot)
			square.style.setProperty("--endRot", endRot)
			
			function fall() {
				let fallFactor = 10
				square.style.top = parseInt(square.style.top) + fallFactor + "px"
				// console.log(square.style.top)
				if (parseInt(square.style.top) > 1000) {
					square.style.top = "10px"
				}
			}
			setInterval(fall, 100)
		}
		// for (let i = 0; i<67; i++){
		// 	makeConfetti()
		// }
		// setInterval(makeConfetti, 500)

		dropConfettiBtn.addEventListener("click", function() {
			for(let i = 0; i < slider.value; i++) {
				makeConfetti()
			}
		})
	</script>
</body>
</html>